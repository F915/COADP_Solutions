# 第2章 计算机的演变和性能

## 思考题

1. 什么是存储程序式计算机？
    > 在存储程序式计算机中，程序以某种形式与数据一同存在于存储器中。计算机通过在存储器中读取程序来获取指令，而且通过设置一部分存储器的值就可以编写和修改程序。

1. 任何通用计算机的四个主要部件是什么？
    > **主存储器**：用于存储数据和指令；能够处理二进制数据的**算术逻辑运算单元（ALU）**；**控制器**，负责解释内存中的指令并执行之；由控制器操纵的**输入输出设备（I/O）**。

1. 对集成电路级别而言，计算机系统的3个基本组成部分是什么？
    > 门、存储器位元（Memory cells）和它们之间的互联。

1. 解释摩尔定律。
    > 摩尔观察到单芯片上所能包含的晶体管数量每年翻一番，并正确断言这种态势在不远的将来还会继续下去。

1. 列出并说明计算机系列的主要特性。
    >- **相似或相同的指令集**：多数情况下，同一系列机器中的所有成员都具有完全相同的机器指令级。这样，能够在一台机器上执行的程序同样也能在另一台机器上执行。
    >- **相似或相同的操作系统**：同一系列机器中的所有成员都有相同的基本操作系统。
    >- **更高的速度**：同一系列机器中，从低端到高端成员，其指令执行速度逐渐增加。
    >- **更多的I/O端口数**：同一系列机器中，从低端到高端成员，其I/O端口数逐渐增加。
    >- **更大的内存容量**：同一系列机器中，从低端到高端成员，其内存容量逐渐增加。
    >- **更高的成本**：同一系列机器中，从低端到高端成员，其成本逐渐增加。

1. 区分微处理器的关键特征是什么？
    > 对于微处理器来说，CPU的所有单元都放在同一块芯片内。

---

## 习题

1. 假设**A**=A（1），A（2），…，A（1000）和**B**=B（1），B（2），…，B（1000）是两个向量（一维数组），每个向量包含1000个数，将它们加起来形成数组C，当I=1，2，…，1000，有C（I）=A（I）+B（I）。试用IAS指令集编写一个程序来解决这个问题。忽略IAS只有1000个存储器字单元的事实。
    > 向量A、B和C分别存储在长度为1000的连续存储空间中，它们的起始位置依次为1001、2001和3001，程序开始于第3字的左半字（即3L）。计数变量N被初始化为999，并在每一循环周期结束后将自减1，直到其达到-1时跳出循环。因此，向量加法将由高下标向低下标处理。

    | 位置 | 指令 | 注释 |
    |  --- | --- | ---  |
    | 0| 999 | 定义常数（计数变量N） |
    | 1| 1 | 定义常数 |
    | 2| 1000| 定义常数 |
    | 3L| LOAD M(2000) | 将A（I）送入累加器（AC） |
    | 3R| ADD M(3000) | 计算A（I）+B（I） |
    | 4L| STOR M(4000) | 将和值送入C（I） |
    | 4R| LOAD M(0) | 读入计数变量N |
    | 5L| SUB M(1) | N自减1 |
    | 5R| JUMP +M(6,20:39) | 如果N非负，跳转6R |
    | 6L| JUMP M(6,0:19) | 终止程序 |
    | 6R| STOR M(0) | 更新N |
    | 7L| ADD M(1) | 累加器（AC）自增1 |
    | 7R| ADD M(2) |  |
    | 8L| STOR M(3,8:19) | 更新3L中的地址 |
    | 8R| ADD M(2) |  |
    | 9L| STOR M(3,28:39) | 更新3R中的地址 |
    | 9R| ADD M(2) |  |
    | 10L| STOR M(4,8:19) | 更新4L中的地址 |
    | 10R| JUMP M(3,0:19) | 跳转到3L |
    
1.  1. 在IAS机上，取存储器地址2的内容的机器代码指令应是怎样的？
    1. 为了完成这条指令，在指令周期内CPU需要访问多少次存储器？
    
    | 操作码 | 操作数 |
    | :---: | :---: |
    | 00000001 | 000000000010 |
    > 首先, CPU必须进入存储器中取得指令。指令包含我们将要装载的数据的地址。然后，CPU再次进入存储器去装载位于该地址的数据的值。在整个执行阶段，共需访问两次存储器。

1. 在IAS机上，需要通过将什么放入MAR、MBR、地址总线、数据总线和控制总线，CPU才能完成由存储器读取一个值或向存储器写一个值？请用英语描述此过程。
    > To read a value from memory, the CPU puts the address of the value it wants into the MAR. The CPU then asserts the Read control line to memory and place the address on the address bus. Memory places the contents of the memory location passed on the data bus. This data is then transferred to the MBR. To write a value to memory, the CPU puts the address of the value it wants to write into the MAR. The CPU also places the data it wants to write into the MBR. The CPU then asserts the Write control line to memory and palce the address on the address bus and the data on the data bus. Memory transfers the data on the data bus into the corresponding memory location.

    > 要从存储器上读取一个值，CPU要将该值的地址置入存储器地址寄存器（MAR），然后CPU使存储器读控制线有效（assert）并将地址放置在地址总线上，存储器将存储器上相应位置的内容放置在数据总线上，继而数据被被传送给存储器缓冲寄存器（MBR）。要向存储器写入一个值，CPU要将该值的地址置入存储器地址寄存器（MAR），同时CPU将计划写入的数据置入存储器缓冲寄存器，然后CPU使存储器写控制线有效（assert）并将地址放置在地址总线上，响应数据放置在数据总线上，存储器从数据总线接收数据并写入相应的存储空间。

1. 给出IAS机的存储内容如下,试写出从地址08A开始的该程序的汇编语言代码，并说明这段程序做什么。
    | 地址 | 内容 |
    |:-:|:-:|
    | 08A | 010FA210FB |
    | 08B | 010FA0F08D |
    | 08C | 020FA210FB |
    > 这段程序将求出位于存储器0FA位置的值的绝对值，将其存储于0FB。
    
    | 地址 | 内容 |
    |:-:|:-:|
    | 08AL | LOAD M(0FA) |
    | 08AR | STOR M(0FA) |
    | 08BL | LOAD M(0FA) |
    | 08BR | JUMP +M(08D) |
    | 08CL | LOAD -M(0FA) |
    | 08CR | STOR M(0FB) |
    | 08D | - |

1. 指出图2-3中每条数据路径（例如，AC和ALU之间）的位宽度。
    > 所有通向/来自MBR的数据路径位宽40 bits；所有通向/来自MAR的数据路径位宽12 bits；通向/来自AC的路径位宽40 bits；通向/来自MQ的路径位宽40 bits.

1. 在IBM 360的Model 65和Model 75中，地址在两个分开的主存储器中交错排放（例如，所有的奇数序号字存放在一个存储器中，而所有的偶数字存放在另一个存储器中），采用这一技术的目的是什么？
    > 目的是为了提升性能。当地址呈递给存储器模块时，在读或写操作生效之前会有一定的时延。当上一块存储器模块产生时延时，可以切换至下一地址，指向另一块存储器模块。对于一系列的连续字请求，当存储器模块为奇偶搭配时速率最大。

# 未完待续
    